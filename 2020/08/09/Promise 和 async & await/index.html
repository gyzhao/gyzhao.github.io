<!doctype html>
<html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Promise å’Œ async &amp; await - gyzhao&#039;s Blog | Thinking</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="gyzhao&#039;s Blog | Thinking"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="gyzhao&#039;s Blog | Thinking"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="å¼‚æ­¥æ˜¯ä¸ºäº†ä¼˜åŒ–éœ€è¦é•¿æ—¶é—´æ“ä½œã€‚å¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ä½¿ä½ çš„ç¨‹åºå¯ä»¥åœ¨æ‰§è¡Œä¸€ä¸ªå¯èƒ½é•¿æœŸè¿è¡Œçš„ä»»åŠ¡çš„åŒæ—¶ç»§ç»­å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”è€Œä¸å¿…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚ å›è°ƒå‡½æ•°å›è°ƒå‡½æ•°è¡¨æ˜å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆã€‚ä½œä¸ºæ›¾ç» JavaScript ä¸­å®ç°å¼‚æ­¥å‡½æ•°çš„ä¸»è¦æ–¹å¼ã€‚ä¸»è¦å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªä¸è¶³ï¼š  é”™è¯¯å¤„ç†å›°éš¾ï¼šå½“ä»»åŠ¡é•¿æœŸè¿è¡Œï¼Œè°ƒç”¨å›è°ƒå‡½æ•°çš„ä»£ç ä¸€èˆ¬ä¸ä¼šå’Œå¼€å§‹ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç ä½äºåŒä¸€äº‹ä»¶å¾ªç¯å‘¨æœŸ è¿ç»­æ‰§è¡Œæ­¥éª¤éå¸¸æ£˜æ‰‹ï¼šä¹Ÿå°±æ˜¯å›è°ƒåœ°ç‹±çš„é—®é¢˜"><meta property="og:type" content="article"><meta property="og:title" content="Promise å’Œ async &amp; await"><meta property="og:url" content="http://example.com/2020/08/09/Promise%20%E5%92%8C%20async%20&amp;%20await/"><meta property="og:site_name" content="gyzhao&#039;s Blog | Thinking"><meta property="og:description" content="å¼‚æ­¥æ˜¯ä¸ºäº†ä¼˜åŒ–éœ€è¦é•¿æ—¶é—´æ“ä½œã€‚å¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ä½¿ä½ çš„ç¨‹åºå¯ä»¥åœ¨æ‰§è¡Œä¸€ä¸ªå¯èƒ½é•¿æœŸè¿è¡Œçš„ä»»åŠ¡çš„åŒæ—¶ç»§ç»­å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”è€Œä¸å¿…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚ å›è°ƒå‡½æ•°å›è°ƒå‡½æ•°è¡¨æ˜å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆã€‚ä½œä¸ºæ›¾ç» JavaScript ä¸­å®ç°å¼‚æ­¥å‡½æ•°çš„ä¸»è¦æ–¹å¼ã€‚ä¸»è¦å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªä¸è¶³ï¼š  é”™è¯¯å¤„ç†å›°éš¾ï¼šå½“ä»»åŠ¡é•¿æœŸè¿è¡Œï¼Œè°ƒç”¨å›è°ƒå‡½æ•°çš„ä»£ç ä¸€èˆ¬ä¸ä¼šå’Œå¼€å§‹ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç ä½äºåŒä¸€äº‹ä»¶å¾ªç¯å‘¨æœŸ è¿ç»­æ‰§è¡Œæ­¥éª¤éå¸¸æ£˜æ‰‹ï¼šä¹Ÿå°±æ˜¯å›è°ƒåœ°ç‹±çš„é—®é¢˜"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://example.com/gallery/js/js_async_await.png"><meta property="article:published_time" content="2020-08-09T14:16:25.000Z"><meta property="article:modified_time" content="2022-08-21T07:44:44.626Z"><meta property="article:author" content="gyzhao"><meta property="article:tag" content="js"><meta property="article:tag" content="async"><meta property="article:tag" content="await"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="http://example.com/gallery/js/js_async_await.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"http://example.com/2020/08/09/Promise%20%E5%92%8C%20async%20&%20await/"},"headline":"Promise å’Œ async & await","image":["http://example.com/gallery/js/js_async_await.png"],"datePublished":"2020-08-09T14:16:25.000Z","dateModified":"2022-08-21T07:44:44.626Z","author":{"@type":"Person","name":"gyzhao"},"publisher":{"@type":"Organization","name":"gyzhao's Blog | Thinking","logo":{"@type":"ImageObject","url":"http://example.com/img/whale_logo.png"}},"description":"å¼‚æ­¥æ˜¯ä¸ºäº†ä¼˜åŒ–éœ€è¦é•¿æ—¶é—´æ“ä½œã€‚å¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ä½¿ä½ çš„ç¨‹åºå¯ä»¥åœ¨æ‰§è¡Œä¸€ä¸ªå¯èƒ½é•¿æœŸè¿è¡Œçš„ä»»åŠ¡çš„åŒæ—¶ç»§ç»­å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”è€Œä¸å¿…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚ å›è°ƒå‡½æ•°å›è°ƒå‡½æ•°è¡¨æ˜å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆã€‚ä½œä¸ºæ›¾ç» JavaScript ä¸­å®ç°å¼‚æ­¥å‡½æ•°çš„ä¸»è¦æ–¹å¼ã€‚ä¸»è¦å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªä¸è¶³ï¼š  é”™è¯¯å¤„ç†å›°éš¾ï¼šå½“ä»»åŠ¡é•¿æœŸè¿è¡Œï¼Œè°ƒç”¨å›è°ƒå‡½æ•°çš„ä»£ç ä¸€èˆ¬ä¸ä¼šå’Œå¼€å§‹ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç ä½äºåŒä¸€äº‹ä»¶å¾ªç¯å‘¨æœŸ è¿ç»­æ‰§è¡Œæ­¥éª¤éå¸¸æ£˜æ‰‹ï¼šä¹Ÿå°±æ˜¯å›è°ƒåœ°ç‹±çš„é—®é¢˜"}</script><link rel="canonical" href="http://example.com/2020/08/09/Promise%20%E5%92%8C%20async%20&amp;%20await/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }
          Array
              .from(document.querySelectorAll('.tab-content'))
              .forEach($tab => {
                  $tab.classList.add('is-hidden');
              });
          Array
              .from(document.querySelectorAll('.tabs li'))
              .forEach($tab => {
                  $tab.classList.remove('is-active');
              });
          const $activeTab = document.querySelector(location.hash);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
          const $tabMenu = document.querySelector(`a[href="${location.hash}"]`);
          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.2.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/whale_logo.png" alt="gyzhao&#039;s Blog | Thinking" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Follow" href="https://github.com/gyzhao"><i class="fab fa-github"></i></a><a class="navbar-item is-hidden-tablet catalogue" title="Catalogue" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="Search" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/gallery/js/js_async_await.png" alt="Promise å’Œ async &amp; await"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item">Posted&nbsp;<time dateTime="2020-08-09T14:16:25.000Z" title="2020/8/9 22:16:25">2020-08-09</time></span><span class="level-item">Updated&nbsp;<time dateTime="2022-08-21T07:44:44.626Z" title="2022/8/21 15:44:44">2022-08-21</time></span><span class="level-item"><a class="link-muted" href="/categories/JavaScript/">JavaScript</a></span><span class="level-item">22 minutes read (About 3347 words)</span></div></div><h1 class="title is-3 is-size-4-mobile">Promise å’Œ async &amp; await</h1><div class="content"><p>å¼‚æ­¥æ˜¯ä¸ºäº†ä¼˜åŒ–éœ€è¦é•¿æ—¶é—´æ“ä½œã€‚å¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ä½¿ä½ çš„ç¨‹åºå¯ä»¥åœ¨æ‰§è¡Œä¸€ä¸ªå¯èƒ½é•¿æœŸè¿è¡Œçš„ä»»åŠ¡çš„åŒæ—¶ç»§ç»­å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”è€Œä¸å¿…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚</p>
<h2 id="å›è°ƒå‡½æ•°"><a href="#å›è°ƒå‡½æ•°" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h2><p>å›è°ƒå‡½æ•°è¡¨æ˜å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆã€‚ä½œä¸ºæ›¾ç» JavaScript ä¸­å®ç°å¼‚æ­¥å‡½æ•°çš„ä¸»è¦æ–¹å¼ã€‚ä¸»è¦å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªä¸è¶³ï¼š</p>
<ul>
<li>é”™è¯¯å¤„ç†å›°éš¾ï¼šå½“ä»»åŠ¡é•¿æœŸè¿è¡Œï¼Œè°ƒç”¨å›è°ƒå‡½æ•°çš„ä»£ç ä¸€èˆ¬ä¸ä¼šå’Œå¼€å§‹ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç ä½äºåŒä¸€äº‹ä»¶å¾ªç¯å‘¨æœŸ</li>
<li>è¿ç»­æ‰§è¡Œæ­¥éª¤éå¸¸æ£˜æ‰‹ï¼šä¹Ÿå°±æ˜¯å›è°ƒåœ°ç‹±çš„é—®é¢˜</li>
<li>æ‰§è¡Œå¹¶è¡Œä»»åŠ¡æ—¶ä¹Ÿæœ‰ä¸€å®šå¤æ‚åº¦<span id="more"></span>
å½“å¼‚æ­¥è¯·æ±‚ç›¸äº’ä¾èµ–æ—¶ä½¿ç”¨å›è°ƒçš„æ–¹å¼ä¼šå¯¼è‡´æ·±åº¦åµŒå¥—ï¼Œä¼šå¯¼è‡´ç»å…¸çš„å›è°ƒåœ°ç‹±ï¼š</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">doSomething</span>(<span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">  <span class="title function_">doSomethingElse</span>(result, <span class="keyword">function</span>(<span class="params">newResult</span>) &#123;</span><br><span class="line">    <span class="title function_">doThirdThing</span>(newResult, <span class="keyword">function</span>(<span class="params">finalResult</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Got the final result: &#x27;</span> + finalResult);</span><br><span class="line">    &#125;, failureCallback);</span><br><span class="line">  &#125;, failureCallback);</span><br><span class="line">&#125;, failureCallback);</span><br></pre></td></tr></table></figure>

<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise#%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0">Promise</a></h2><p><code>Promise </code>æ˜¯ç°åœ¨ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ã€‚**<code>Promise</code>** å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼ã€‚</p>
<h3 id="Promises-x2F-A-è§„èŒƒ"><a href="#Promises-x2F-A-è§„èŒƒ" class="headerlink" title="Promises&#x2F;A+ è§„èŒƒ"></a><a target="_blank" rel="noopener" href="https://promisesaplus.com/">Promises&#x2F;A+ è§„èŒƒ</a></h3><p>Promise ä½œä¸ºå¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ã€‚ES6 å¢åŠ äº†å¯¹ <code>Promises/A+</code> è§„èŒƒçš„å®Œå–„æ”¯æŒï¼Œå°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†<code>Promise</code>å¯¹è±¡ã€‚</p>
<h3 id="Promise-åŸºç¡€"><a href="#Promise-åŸºç¡€" class="headerlink" title="Promise åŸºç¡€"></a>Promise åŸºç¡€</h3><p>Promise æœ‰ä¸‹é¢ä¸‰ç§çŠ¶æ€ï¼š</p>
<ul>
<li>å¾…å®šï¼ˆ<code>pending</code>ï¼‰ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ã€‚</li>
<li><em>å·²å…‘ç°ï¼ˆ <strong><code>fulfilled</code></strong> ï¼‰</em> ï¼šæ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚</li>
<li><em>å·²æ‹’ç»ï¼ˆ <strong><code>rejected</code></strong> ï¼‰</em> ï¼šæ„å‘³ç€æ“ä½œå¤±è´¥ã€‚</li>
</ul>
<p>å¾…å®šçŠ¶æ€çš„ <code>Promise </code>å¯¹è±¡è¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªå€¼è¢«å…‘ç°ï¼Œè¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªåŸå› ï¼ˆé”™è¯¯ï¼‰ <em>è¢«æ‹’ç»</em> ã€‚å½“è¿™äº›æƒ…å†µä¹‹ä¸€å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬ç”¨ <code>promise</code>çš„ <code>then</code> æ–¹æ³•æ’åˆ—èµ·æ¥çš„ç›¸å…³å¤„ç†ç¨‹åºå°±ä¼šè¢«è°ƒç”¨ã€‚ä¸”è¿‡ç¨‹æ˜¯ä¸å¯é€†çš„ï¼Œä¸€ä¸ª promise åªèƒ½æˆåŠŸæˆ–å¤±è´¥ä¸€æ¬¡ã€‚</p>
<p><img src="/gallery/js/promise_struct.png" alt="promise"></p>
<p>Promise çš„çŠ¶æ€æ˜¯ç§æœ‰çš„ï¼Œè€Œä¸”çŠ¶æ€ä¹Ÿä¸èƒ½è¢«å¤–éƒ¨ä»£ç ä¿®æ”¹ã€‚Promise ç‰¹æ„å°†å¼‚æ­¥è¡Œä¸ºå°è£…èµ·æ¥ï¼Œä»è€Œéš”ç¦»å¤–éƒ¨çš„åŒæ­¥ä»£ç ã€‚</p>
<p>ä½¿ç”¨Promise æœ‰ä»¥ä¸‹çº¦å®šï¼š</p>
<ul>
<li>åœ¨æœ¬è½® <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop#%E6%89%A7%E8%A1%8C%E8%87%B3%E5%AE%8C%E6%88%90">äº‹ä»¶å¾ªç¯</a> è¿è¡Œå®Œæˆä¹‹å‰ï¼Œå›è°ƒå‡½æ•°æ˜¯ä¸ä¼šè¢«è°ƒç”¨çš„ã€‚</li>
<li>å³ä½¿å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œåœ¨è¿™ä¹‹åé€šè¿‡ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"><code>then()</code></a> æ·»åŠ çš„å›è°ƒå‡½æ•°ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚</li>
<li>é€šè¿‡å¤šæ¬¡è°ƒç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"><code>then()</code></a> å¯ä»¥æ·»åŠ å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒä»¬ä¼šæŒ‰ç…§æ’å…¥é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚</li>
</ul>
<h4 id="Promise-æ„é€ å™¨"><a href="#Promise-æ„é€ å™¨" class="headerlink" title="Promise() æ„é€ å™¨"></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/Promise">Promise() æ„é€ å™¨</a></h4><p><strong><code>Promise</code></strong> æ„é€ å™¨ä¸»è¦ç”¨äºåŒ…è£…ä¸æ”¯æŒ promiseï¼ˆè¿”å›å€¼ä¸æ˜¯ <code>Promise</code>ï¼‰çš„å‡½æ•°ã€‚æ„é€ å™¨æ¥å—ä¸€ä¸ªåä¸º â€œ <em>executor function</em> â€œ çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åº”å½“æ¥å—ä¸¤ä¸ªå‡½æ•°å‚æ•°ã€‚å½“å¼‚æ­¥ä»»åŠ¡æˆåŠŸæ—¶ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°ï¼ˆ<code>resolve</code>ï¼‰å°†è¢«è°ƒç”¨ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ä»£è¡¨æˆåŠŸã€‚å½“å…¶å¤±è´¥æ—¶ï¼Œç¬¬äºŒä¸ªå‡½æ•°ï¼ˆ<code>reject</code>ï¼‰å°†è¢«è°ƒç”¨ï¼Œå¹¶è¿”å›å¤±è´¥åŸå› ï¼ˆå¤±è´¥åŸå› é€šå¸¸æ˜¯ä¸€ä¸ª error å¯¹è±¡ï¼‰ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(executor)</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">await</span> = (<span class="params">ws</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> ws !== <span class="string">&#x27;number&#x27;</span>) &#123; </span><br><span class="line">        <span class="title function_">reject</span>(<span class="title class_">Error</span>(<span class="string">&#x27;ws must be a number.&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, ws);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Promise-çš„å®ä¾‹æ–¹æ³•"><a href="#Promise-çš„å®ä¾‹æ–¹æ³•" class="headerlink" title="Promise çš„å®ä¾‹æ–¹æ³•"></a>Promise çš„å®ä¾‹æ–¹æ³•</h4><p>ä¸‹é¢çš„æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª <code>promise</code>ï¼Œæ‰€ä»¥éƒ½æ˜¯å¯ä»¥è¢« <strong>é“¾å¼è°ƒç”¨</strong> ï¼ˆ <strong>chaining</strong> ï¼‰ã€‚</p>
<ul>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/then"><code>Promise.prototype.then</code></a><br>ä¸º promise æ·»åŠ è¢«å…‘ç°å’Œè¢«æ‹’ç»çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä»¥å›è°ƒå‡½æ•°çš„è¿”å›å€¼å…‘ç° <code>promise</code></li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch"><code>Promise.prototype.catch</code></a><br>è¢«æ‹’ç»çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œè‹¥å›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œåˆ™å…‘ç°å…¶è¿”å›å€¼ï¼Œå¦åˆ™å…‘ç°åŸæ¥çš„ <code>promise </code>å…‘ç°çš„å€¼</li>
<li><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally"><code>Promise.prototype.finally()</code></a><br>å°†åœ¨åŸ <code>promise </code>è¢«æ•²å®šï¼ˆæ— è®ºè¢«å…‘ç°è¿˜æ˜¯è¢«æ‹’ç»ï¼‰æ—¶è¢«è°ƒç”¨</li>
</ul>
<p><code>catch(failureCallback)</code> æ˜¯ <code>then(null, failureCallback)</code> çš„ç¼©ç•¥å½¢å¼ã€‚ä¸€é‡åˆ°å¼‚å¸¸æŠ›å‡ºï¼Œæµè§ˆå™¨å°±ä¼šé¡ºç€ Promise é“¾å¯»æ‰¾ä¸‹ä¸€ä¸ª <code>onRejected</code> å¤±è´¥å›è°ƒå‡½æ•°æˆ–è€…ç”± <code>.catch()</code> æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚<code>onRejected</code> å¤„ç†ç¨‹åºè¿”å›çš„å€¼ä¹Ÿä¼šè¢« <code>Promise.resolve()</code> åŒ…è£…ã€‚</p>
<h4 id="é™æ€æ–¹æ³•"><a href="#é™æ€æ–¹æ³•" class="headerlink" title="é™æ€æ–¹æ³•"></a><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise#%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95">é™æ€æ–¹æ³•</a></h4><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve"><code>Promise.resolve()</code></a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject"><code>Promise.reject()</code></a> æ˜¯æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªå·²ç» resolve æˆ–è€… reject çš„ Promise å¿«æ·æ–¹æ³•ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"><code>Promise.all()</code></a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/race"><code>Promise.race()</code></a> æ˜¯å¹¶è¡Œè¿è¡Œå¼‚æ­¥æ“ä½œçš„ä¸¤ä¸ªç»„åˆå¼å·¥å…·ã€‚</p>
<h3 id="Promise-æ‰©å±•"><a href="#Promise-æ‰©å±•" class="headerlink" title="Promise æ‰©å±•"></a>Promise æ‰©å±•</h3><p>ES6 çš„ Promise å®ç°æœ‰ä¸¤ä¸ªç‰¹æ€§å¹¶æ²¡æœ‰å®ç°ï¼šPromise å–æ¶ˆå’Œè¿›åº¦è·Ÿè¸ªã€‚</p>
<h2 id="async-x2F-await"><a href="#async-x2F-await" class="headerlink" title="async&#x2F;await"></a>async&#x2F;await</h2><p>å¼‚æ­¥æ–¹æ³•å¹¶ä¸ä¼šç«‹å³è¿”å›æœ€ç»ˆçš„å€¼ï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ª  <em><code>promise</code></em> ï¼Œä»¥ä¾¿åœ¨æœªæ¥æŸä¸ªæ—¶å€™æŠŠå€¼äº¤ç»™ä½¿ç”¨è€…ã€‚</p>
<p><code>async</code>å’Œ<code>await</code>å…³é”®å­—è®©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼å†™å‡ºåŸºäº<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a>çš„å¼‚æ­¥è¡Œä¸ºï¼Œè€Œæ— éœ€åˆ»æ„åœ°é“¾å¼è°ƒç”¨<code>promise</code></p>
<ul>
<li><code>async</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> å¯¹è±¡ã€‚è¿™ä¸ª promise è¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªç”± async å‡½æ•°è¿”å›çš„å€¼è¢«è§£å†³ï¼Œè¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªä» async å‡½æ•°ä¸­æŠ›å‡ºçš„ï¼ˆæˆ–å…¶ä¸­æ²¡æœ‰è¢«æ•è·åˆ°çš„ï¼‰å¼‚å¸¸è¢«æ‹’ç»ã€‚</li>
<li><code>await</code> æ“ä½œç¬¦ç”¨äºç­‰å¾…ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise"><code>Promise</code></a> å¯¹è±¡ã€‚å®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•° <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function"><code>async function</code></a> ä¸­ä½¿ç”¨ã€‚</li>
</ul>
<h3 id="å‚è€ƒ"><a href="#å‚è€ƒ" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><h1 id="Promise-å’Œ-async-x2F-await"><a href="#Promise-å’Œ-async-x2F-await" class="headerlink" title="Promise å’Œ async&#x2F;await"></a>Promise å’Œ async&#x2F;await</h1><p>å¼‚æ­¥æ˜¯ä¸ºäº†ä¼˜åŒ–éœ€è¦é•¿æ—¶é—´æ“ä½œã€‚å¼‚æ­¥ç¼–ç¨‹æŠ€æœ¯ä½¿ä½ çš„ç¨‹åºå¯ä»¥åœ¨æ‰§è¡Œä¸€ä¸ªå¯èƒ½é•¿æœŸè¿è¡Œçš„ä»»åŠ¡çš„åŒæ—¶ç»§ç»­å¯¹å…¶ä»–äº‹ä»¶åšå‡ºååº”è€Œä¸å¿…ç­‰å¾…ä»»åŠ¡å®Œæˆã€‚</p>
<h2 id="å›è°ƒå‡½æ•°-1"><a href="#å›è°ƒå‡½æ•°-1" class="headerlink" title="å›è°ƒå‡½æ•°"></a>å›è°ƒå‡½æ•°</h2><p>å›è°ƒå‡½æ•°è¡¨æ˜å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆã€‚ä½œä¸ºæ›¾ç» JavaScript ä¸­å®ç°å¼‚æ­¥å‡½æ•°çš„ä¸»è¦æ–¹å¼ã€‚ä¸»è¦å­˜åœ¨ä»¥ä¸‹å‡ ä¸ªä¸è¶³ï¼š</p>
<ul>
<li>é”™è¯¯å¤„ç†å›°éš¾ï¼šå½“ä»»åŠ¡é•¿æœŸè¿è¡Œï¼Œè°ƒç”¨å›è°ƒå‡½æ•°çš„ä»£ç ä¸€èˆ¬ä¸ä¼šå’Œå¼€å§‹ä»»åŠ¡ä¸­çš„åŒæ­¥ä»£ç ä½äºåŒä¸€äº‹ä»¶å¾ªç¯å‘¨æœŸ</li>
<li>è¿ç»­æ‰§è¡Œæ­¥éª¤éå¸¸æ£˜æ‰‹ï¼šä¹Ÿå°±æ˜¯å›è°ƒåœ°ç‹±çš„é—®é¢˜</li>
<li>æ‰§è¡Œå¹¶è¡Œä»»åŠ¡æ—¶ä¹Ÿæœ‰ä¸€å®šå¤æ‚åº¦</li>
</ul>
<p>å½“å¼‚æ­¥è¯·æ±‚ç›¸äº’ä¾èµ–æ—¶ä½¿ç”¨å›è°ƒçš„æ–¹å¼ä¼šå¯¼è‡´æ·±åº¦åµŒå¥—ï¼Œä¼šå¯¼è‡´ç»å…¸çš„å›è°ƒåœ°ç‹±ï¼š</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="title function_">doSomething</span>(<span class="keyword">function</span>(<span class="params">result</span>) &#123;</span><br><span class="line">  <span class="title function_">doSomethingElse</span>(result, <span class="keyword">function</span>(<span class="params">newResult</span>) &#123;</span><br><span class="line">    <span class="title function_">doThirdThing</span>(newResult, <span class="keyword">function</span>(<span class="params">finalResult</span>) &#123;</span><br><span class="line">      <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="string">&#x27;Got the final result: &#x27;</span> + finalResult);</span><br><span class="line">    &#125;, failureCallback);</span><br><span class="line">  &#125;, failureCallback);</span><br><span class="line">&#125;, failureCallback);</span><br></pre></td></tr></table></figure>

<h2 id="Promise-1"><a href="#Promise-1" class="headerlink" title="Promise"></a>Promise</h2><p><code>Promise </code>æ˜¯ç°åœ¨ JavaScript å¼‚æ­¥ç¼–ç¨‹çš„åŸºç¡€ã€‚**** å¯¹è±¡ç”¨äºè¡¨ç¤ºä¸€ä¸ªå¼‚æ­¥æ“ä½œçš„æœ€ç»ˆå®Œæˆï¼ˆæˆ–å¤±è´¥ï¼‰åŠå…¶ç»“æœå€¼ã€‚</p>
<h3 id="Promises-x2F-A-è§„èŒƒ-1"><a href="#Promises-x2F-A-è§„èŒƒ-1" class="headerlink" title="Promises&#x2F;A+ è§„èŒƒ"></a>Promises&#x2F;A+ è§„èŒƒ</h3><p>Promise ä½œä¸ºå¼‚æ­¥ç¼–ç¨‹çš„ä¸€ç§è§£å†³æ–¹æ¡ˆï¼Œå®ƒç”±ç¤¾åŒºæœ€æ—©æå‡ºå’Œå®ç°ã€‚ES6 å¢åŠ äº†å¯¹ <code>Promises/A+</code> è§„èŒƒçš„å®Œå–„æ”¯æŒï¼Œå°†å…¶å†™è¿›äº†è¯­è¨€æ ‡å‡†ï¼Œç»Ÿä¸€äº†ç”¨æ³•ï¼ŒåŸç”Ÿæä¾›äº†<code>Promise</code>å¯¹è±¡ã€‚</p>
<h3 id="Promise-åŸºç¡€-1"><a href="#Promise-åŸºç¡€-1" class="headerlink" title="Promise åŸºç¡€"></a>Promise åŸºç¡€</h3><p>Promise æœ‰ä¸‹é¢ä¸‰ç§çŠ¶æ€ï¼š</p>
<ul>
<li>å¾…å®šï¼ˆ<code>pending</code>ï¼‰ï¼šåˆå§‹çŠ¶æ€ï¼Œæ—¢æ²¡æœ‰è¢«å…‘ç°ï¼Œä¹Ÿæ²¡æœ‰è¢«æ‹’ç»ã€‚</li>
<li><em>å·²å…‘ç°ï¼ˆ</em>**<em>ï¼‰</em>ï¼šæ„å‘³ç€æ“ä½œæˆåŠŸå®Œæˆã€‚</li>
<li><em>å·²æ‹’ç»ï¼ˆ</em>**<em>ï¼‰</em>ï¼šæ„å‘³ç€æ“ä½œå¤±è´¥ã€‚</li>
</ul>
<p>å¾…å®šçŠ¶æ€çš„ <code>Promise </code>å¯¹è±¡è¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªå€¼è¢«å…‘ç°ï¼Œè¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªåŸå› ï¼ˆé”™è¯¯ï¼‰<em>è¢«æ‹’ç»</em>ã€‚å½“è¿™äº›æƒ…å†µä¹‹ä¸€å‘ç”Ÿæ—¶ï¼Œæˆ‘ä»¬ç”¨ <code>promise </code>çš„ <code>then</code> æ–¹æ³•æ’åˆ—èµ·æ¥çš„ç›¸å…³å¤„ç†ç¨‹åºå°±ä¼šè¢«è°ƒç”¨ã€‚ä¸”è¿‡ç¨‹æ˜¯ä¸å¯é€†çš„ï¼Œä¸€ä¸ª promise åªèƒ½æˆåŠŸæˆ–å¤±è´¥ä¸€æ¬¡ã€‚</p>
<p><img src="/image/image_WGljzcL_5Y.png"></p>
<blockquote>
<p>ğŸ“ŒPromise çš„çŠ¶æ€æ˜¯ç§æœ‰çš„ï¼Œè€Œä¸”çŠ¶æ€ä¹Ÿä¸èƒ½è¢«å¤–éƒ¨ä»£ç ä¿®æ”¹ã€‚Promise ç‰¹æ„å°†å¼‚æ­¥è¡Œä¸ºå°è£…èµ·æ¥ï¼Œä»è€Œéš”ç¦»å¤–éƒ¨çš„åŒæ­¥ä»£ç ã€‚</p>
</blockquote>
<p>ä½¿ç”¨Promise æœ‰ä»¥ä¸‹çº¦å®šï¼š</p>
<ul>
<li>åœ¨æœ¬è½®Â <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop#%E6%89%A7%E8%A1%8C%E8%87%B3%E5%AE%8C%E6%88%90" title="äº‹ä»¶å¾ªç¯">äº‹ä»¶å¾ªç¯</a>Â è¿è¡Œå®Œæˆä¹‹å‰ï¼Œå›è°ƒå‡½æ•°æ˜¯ä¸ä¼šè¢«è°ƒç”¨çš„ã€‚</li>
<li>å³ä½¿å¼‚æ­¥æ“ä½œå·²ç»å®Œæˆï¼ˆæˆåŠŸæˆ–å¤±è´¥ï¼‰ï¼Œåœ¨è¿™ä¹‹åé€šè¿‡ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" title="then()">then()</a> æ·»åŠ çš„å›è°ƒå‡½æ•°ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚</li>
<li>é€šè¿‡å¤šæ¬¡è°ƒç”¨ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" title="then()">then()</a> å¯ä»¥æ·»åŠ å¤šä¸ªå›è°ƒå‡½æ•°ï¼Œå®ƒä»¬ä¼šæŒ‰ç…§æ’å…¥é¡ºåºè¿›è¡Œæ‰§è¡Œã€‚</li>
</ul>
<h4 id="Promise-æ„é€ å™¨-1"><a href="#Promise-æ„é€ å™¨-1" class="headerlink" title="Promise() æ„é€ å™¨"></a>Promise() æ„é€ å™¨</h4><p>**** æ„é€ å™¨ä¸»è¦ç”¨äºåŒ…è£…ä¸æ”¯æŒ promiseï¼ˆè¿”å›å€¼ä¸æ˜¯ <code>Promise</code>ï¼‰çš„å‡½æ•°ã€‚æ„é€ å™¨æ¥å—ä¸€ä¸ªåä¸º â€œ<em>executor function</em>â€œ çš„å‡½æ•°ã€‚è¿™ä¸ªå‡½æ•°åº”å½“æ¥å—ä¸¤ä¸ªå‡½æ•°å‚æ•°ã€‚å½“å¼‚æ­¥ä»»åŠ¡æˆåŠŸæ—¶ï¼Œç¬¬ä¸€ä¸ªå‡½æ•°ï¼ˆ<code>resolve</code>ï¼‰å°†è¢«è°ƒç”¨ï¼Œå¹¶è¿”å›ä¸€ä¸ªå€¼ä»£è¡¨æˆåŠŸã€‚å½“å…¶å¤±è´¥æ—¶ï¼Œç¬¬äºŒä¸ªå‡½æ•°ï¼ˆ<code>reject</code>ï¼‰å°†è¢«è°ƒç”¨ï¼Œå¹¶è¿”å›å¤±è´¥åŸå› ï¼ˆå¤±è´¥åŸå› é€šå¸¸æ˜¯ä¸€ä¸ª error å¯¹è±¡ï¼‰ã€‚è¯­æ³•å¦‚ä¸‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> <span class="title class_">Promise</span>(executor)</span><br></pre></td></tr></table></figure>

<p>ä¸€ä¸ªç®€å•çš„ç¤ºä¾‹ï¼š</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> <span class="title function_">await</span> = (<span class="params">ws</span>) =&gt; <span class="keyword">new</span> <span class="title class_">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="keyword">typeof</span> ws !== <span class="string">&#x27;number&#x27;</span>) &#123; </span><br><span class="line">        <span class="title function_">reject</span>(<span class="title class_">Error</span>(<span class="string">&#x27;ws must be a number.&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">setTimeout</span>(resolve, ws);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="Promise-çš„å®ä¾‹æ–¹æ³•-1"><a href="#Promise-çš„å®ä¾‹æ–¹æ³•-1" class="headerlink" title="Promise çš„å®ä¾‹æ–¹æ³•"></a>Promise çš„å®ä¾‹æ–¹æ³•</h4><p>ä¸‹é¢çš„æ–¹æ³•è¿”å›çš„æ˜¯ä¸€ä¸ª <code>promise</code>ï¼Œæ‰€ä»¥éƒ½æ˜¯å¯ä»¥è¢«é“¾å¼è°ƒç”¨ï¼ˆ<strong>chaining</strong>ï¼‰ã€‚</p>
<ul>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/then" title="Promise.prototype.then">Promise.prototype.then</a><code>&amp;#x20;</code></p>
<p>ä¸º promise æ·»åŠ è¢«å…‘ç°å’Œè¢«æ‹’ç»çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œå…¶ä»¥å›è°ƒå‡½æ•°çš„è¿”å›å€¼å…‘ç° <code>promise</code></p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/catch" title="Promise.prototype.catch">Promise.prototype.catch</a></p>
<p>è¢«æ‹’ç»çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œè‹¥å›è°ƒå‡½æ•°è¢«è°ƒç”¨ï¼Œåˆ™å…‘ç°å…¶è¿”å›å€¼ï¼Œå¦åˆ™å…‘ç°åŸæ¥çš„ <code>promise </code>å…‘ç°çš„å€¼</p>
</li>
<li><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/finally" title="Promise.prototype.finally()">Promise.prototype.finally()</a></p>
<p>å°†åœ¨åŸ <code>promise </code>è¢«æ•²å®šï¼ˆæ— è®ºè¢«å…‘ç°è¿˜æ˜¯è¢«æ‹’ç»ï¼‰æ—¶è¢«è°ƒç”¨</p>
</li>
</ul>
<p><code>catch(failureCallback)</code> æ˜¯ <code>then(null, failureCallback)</code> çš„ç¼©ç•¥å½¢å¼ã€‚ä¸€é‡åˆ°å¼‚å¸¸æŠ›å‡ºï¼Œæµè§ˆå™¨å°±ä¼šé¡ºç€ Promise é“¾å¯»æ‰¾ä¸‹ä¸€ä¸ª <code>onRejected</code> å¤±è´¥å›è°ƒå‡½æ•°æˆ–è€…ç”± <code>.catch()</code> æŒ‡å®šçš„å›è°ƒå‡½æ•°ã€‚<code>onRejected</code> å¤„ç†ç¨‹åºè¿”å›çš„å€¼ä¹Ÿä¼šè¢« <code>Promise.resolve()</code> åŒ…è£…ã€‚</p>
<h4 id="é™æ€æ–¹æ³•-1"><a href="#é™æ€æ–¹æ³•-1" class="headerlink" title="é™æ€æ–¹æ³•"></a>é™æ€æ–¹æ³•</h4><p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/resolve" title="Promise.resolve()">Promise.resolve()</a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject" title="Promise.reject()">Promise.reject()</a> æ˜¯æ‰‹åŠ¨åˆ›å»ºä¸€ä¸ªå·²ç» resolve æˆ–è€… reject çš„ Promise å¿«æ·æ–¹æ³•ã€‚</p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/all" title="Promise.all()">Promise.all()</a> å’Œ <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise/race" title="Promise.race()">Promise.race()</a> æ˜¯å¹¶è¡Œè¿è¡Œå¼‚æ­¥æ“ä½œçš„ä¸¤ä¸ªç»„åˆå¼å·¥å…·ã€‚</p>
<h3 id="Promise-æ‰©å±•-1"><a href="#Promise-æ‰©å±•-1" class="headerlink" title="Promise æ‰©å±•"></a>Promise æ‰©å±•</h3><p>ES6 çš„ Promise å®ç°æœ‰ä¸¤ä¸ªç‰¹æ€§å¹¶æ²¡æœ‰å®ç°ï¼šPromise å–æ¶ˆå’Œè¿›åº¦è·Ÿè¸ªã€‚</p>
<h2 id="async-x2F-await-1"><a href="#async-x2F-await-1" class="headerlink" title="async&#x2F;await"></a>async&#x2F;await</h2><p>å¼‚æ­¥æ–¹æ³•å¹¶ä¸ä¼šç«‹å³è¿”å›æœ€ç»ˆçš„å€¼ï¼Œè€Œæ˜¯ä¼šè¿”å›ä¸€ä¸ª *Promise*ï¼Œä»¥ä¾¿åœ¨æœªæ¥æŸä¸ªæ—¶å€™æŠŠå€¼äº¤ç»™ä½¿ç”¨è€…ã€‚</p>
<p><code>async</code>å’Œ<code>await</code>å…³é”®å­—è®©æˆ‘ä»¬å¯ä»¥ç”¨ä¸€ç§æ›´ç®€æ´çš„æ–¹å¼å†™å‡ºåŸºäº<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise">Promise</a>çš„å¼‚æ­¥è¡Œä¸ºï¼Œè€Œæ— éœ€åˆ»æ„åœ°é“¾å¼è°ƒç”¨<code>promise</code></p>
<ul>
<li><code>async</code> å‡½æ•°çš„è¿”å›å€¼æ˜¯ä¸€ä¸ª <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise">Promise</a> å¯¹è±¡ã€‚è¿™ä¸ª promise è¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªç”± async å‡½æ•°è¿”å›çš„å€¼è¢«è§£å†³ï¼Œè¦ä¹ˆä¼šé€šè¿‡ä¸€ä¸ªä» async å‡½æ•°ä¸­æŠ›å‡ºçš„ï¼ˆæˆ–å…¶ä¸­æ²¡æœ‰è¢«æ•è·åˆ°çš„ï¼‰å¼‚å¸¸è¢«æ‹’ç»ã€‚</li>
<li><code>await</code> æ“ä½œç¬¦ç”¨äºç­‰å¾…ä¸€ä¸ª<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise" title="Promise">Promise</a> å¯¹è±¡ã€‚å®ƒåªèƒ½åœ¨å¼‚æ­¥å‡½æ•° <a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function" title="async function">async function</a> ä¸­ä½¿ç”¨ã€‚</li>
</ul>
<h3 id="å‚è€ƒ-1"><a href="#å‚è€ƒ-1" class="headerlink" title="å‚è€ƒ"></a>å‚è€ƒ</h3><p><a target="_blank" rel="noopener" href="https://book.douban.com/subject/35175321/">https://book.douban.com/subject/35175321/</a></p>
<p><a target="_blank" rel="noopener" href="https://book.douban.com/subject/30143702/">https://book.douban.com/subject/30143702/</a></p>
<p><a target="_blank" rel="noopener" href="https://web.dev/i18n/zh/promises/">https://web.dev/i18n/zh/promises/</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Asynchronous">https://developer.mozilla.org/zh-CN/docs/Learn/JavaScript/Asynchronous</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects/Promise">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Global_Objects&#x2F;Promise</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Guide/Using_promises</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/EventLoop</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Statements/async_function</a></p>
<p><a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/await">https://developer.mozilla.org/zh-CN/docs/Web/JavaScript/Reference/Operators/await</a></p>
<p><a target="_blank" rel="noopener" href="https://es6.ruanyifeng.com/#docs/promise">https://es6.ruanyifeng.com/#docs/promise</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Promise å’Œ async &amp; await</p><p><a href="http://example.com/2020/08/09/Promise å’Œ async &amp; await/">http://example.com/2020/08/09/Promise å’Œ async &amp; await/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>Author</h6><p>gyzhao</p></div></div><div class="level-item is-narrow"><div><h6>Posted on</h6><p>2020-08-09</p></div></div><div class="level-item is-narrow"><div><h6>Updated on</h6><p>2022-08-21</p></div></div><div class="level-item is-narrow"><div><h6>Licensed under</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/js/">js</a><a class="link-muted mr-2" rel="tag" href="/tags/async/">async</a><a class="link-muted mr-2" rel="tag" href="/tags/await/">await</a></div><div class="a2a_kit a2a_kit_size_32 a2a_default_style"><a class="a2a_dd" target="_blank" rel="noopener" href="https://www.addtoany.com/share"></a><a class="a2a_button_facebook"></a><a class="a2a_button_twitter"></a><a class="a2a_button_telegram"></a><a class="a2a_button_whatsapp"></a><a class="a2a_button_reddit"></a></div><script src="https://static.addtoany.com/menu/page.js" defer></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/07/13/%E8%BF%AD%E4%BB%A3%E5%99%A8(Iterators)%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8(Generator)/"><span class="level-item">è¿­ä»£å™¨(Iterators)å’Œç”Ÿæˆå™¨(Generator)</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">Comments</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'http://example.com/2020/08/09/Promise%20%E5%92%8C%20async%20&%20await/';
            this.page.identifier = '2020/08/09/Promise å’Œ async & await/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'gyzhao-blog' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar_code.png" alt="gyzhao"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">gyzhao</p><p class="is-size-6 is-block">Stay Hungry, Stay Foolish.</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Beijing</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">Posts</p><a href="/archives"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Category</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">Tags</p><a href="/tags"><p class="title">5</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/gyzhao" target="_blank" rel="noopener">Follow</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/gyzhao"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">Links</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://hexo.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Hexo</span></span><span class="level-right"><span class="level-item tag">hexo.io</span></span></a></li><li><a class="level is-mobile" href="https://bulma.io" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">Bulma</span></span><span class="level-right"><span class="level-item tag">bulma.io</span></span></a></li></ul></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">Categories</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/JavaScript/"><span class="level-start"><span class="level-item">JavaScript</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">Tags</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/Generator/"><span class="tag">Generator</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/Iterator/"><span class="tag">Iterator</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/async/"><span class="tag">async</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/await/"><span class="tag">await</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/js/"><span class="tag">js</span><span class="tag">2</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">Catalogue</h3><ul class="menu-list"><ul class="menu-list"><li><a class="level is-mobile" href="#å›è°ƒå‡½æ•°"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">å›è°ƒå‡½æ•°</span></span></a></li><li><a class="level is-mobile" href="#Promise"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">Promise</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Promises-x2F-A-è§„èŒƒ"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">Promises/A+ è§„èŒƒ</span></span></a></li><li><a class="level is-mobile" href="#Promise-åŸºç¡€"><span class="level-left"><span class="level-item">1.2.2</span><span class="level-item">Promise åŸºç¡€</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Promise-æ„é€ å™¨"><span class="level-left"><span class="level-item">1.2.2.1</span><span class="level-item">Promise() æ„é€ å™¨</span></span></a></li><li><a class="level is-mobile" href="#Promise-çš„å®ä¾‹æ–¹æ³•"><span class="level-left"><span class="level-item">1.2.2.2</span><span class="level-item">Promise çš„å®ä¾‹æ–¹æ³•</span></span></a></li><li><a class="level is-mobile" href="#é™æ€æ–¹æ³•"><span class="level-left"><span class="level-item">1.2.2.3</span><span class="level-item">é™æ€æ–¹æ³•</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Promise-æ‰©å±•"><span class="level-left"><span class="level-item">1.2.3</span><span class="level-item">Promise æ‰©å±•</span></span></a></li></ul></li><li><a class="level is-mobile" href="#async-x2F-await"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">async/await</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å‚è€ƒ"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">å‚è€ƒ</span></span></a></li></ul></li></ul><li><a class="level is-mobile" href="#Promise-å’Œ-async-x2F-await"><span class="level-left"><span class="level-item">2</span><span class="level-item">Promise å’Œ async/await</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å›è°ƒå‡½æ•°-1"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">å›è°ƒå‡½æ•°</span></span></a></li><li><a class="level is-mobile" href="#Promise-1"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">Promise</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Promises-x2F-A-è§„èŒƒ-1"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">Promises/A+ è§„èŒƒ</span></span></a></li><li><a class="level is-mobile" href="#Promise-åŸºç¡€-1"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">Promise åŸºç¡€</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#Promise-æ„é€ å™¨-1"><span class="level-left"><span class="level-item">2.2.2.1</span><span class="level-item">Promise() æ„é€ å™¨</span></span></a></li><li><a class="level is-mobile" href="#Promise-çš„å®ä¾‹æ–¹æ³•-1"><span class="level-left"><span class="level-item">2.2.2.2</span><span class="level-item">Promise çš„å®ä¾‹æ–¹æ³•</span></span></a></li><li><a class="level is-mobile" href="#é™æ€æ–¹æ³•-1"><span class="level-left"><span class="level-item">2.2.2.3</span><span class="level-item">é™æ€æ–¹æ³•</span></span></a></li></ul></li><li><a class="level is-mobile" href="#Promise-æ‰©å±•-1"><span class="level-left"><span class="level-item">2.2.3</span><span class="level-item">Promise æ‰©å±•</span></span></a></li></ul></li><li><a class="level is-mobile" href="#async-x2F-await-1"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">async/await</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#å‚è€ƒ-1"><span class="level-left"><span class="level-item">2.3.1</span><span class="level-item">å‚è€ƒ</span></span></a></li></ul></li></ul></li></ul></div></div><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">Recents</h3><article class="media"><figure class="media-left"><a class="image" href="/2020/08/09/Promise%20%E5%92%8C%20async%20&amp;%20await/"><img src="/gallery/thumbnail/javascript.png" alt="Promise å’Œ async &amp; await"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-08-09T14:16:25.000Z">2020-08-09</time></p><p class="title"><a href="/2020/08/09/Promise%20%E5%92%8C%20async%20&amp;%20await/">Promise å’Œ async &amp; await</a></p><p class="categories"><a href="/categories/JavaScript/">JavaScript</a></p></div></article><article class="media"><figure class="media-left"><a class="image" href="/2020/07/13/%E8%BF%AD%E4%BB%A3%E5%99%A8(Iterators)%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8(Generator)/"><img src="/gallery/thumbnail/javascript.png" alt="è¿­ä»£å™¨(Iterators)å’Œç”Ÿæˆå™¨(Generator)"></a></figure><div class="media-content"><p class="date"><time dateTime="2020-07-13T12:46:25.000Z">2020-07-13</time></p><p class="title"><a href="/2020/07/13/%E8%BF%AD%E4%BB%A3%E5%99%A8(Iterators)%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8(Generator)/">è¿­ä»£å™¨(Iterators)å’Œç”Ÿæˆå™¨(Generator)</a></p><p class="categories"><a href="/categories/JavaScript/">JavaScript</a></p></div></article></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">Archives</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">August 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">July 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/whale_logo.png" alt="gyzhao&#039;s Blog | Thinking" height="28"></a><p class="is-size-7"><span>&copy; 2022 gyzhao</span>Â Â Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>Â &amp;Â <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p></div></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("en");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="Back to top" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "This website uses cookies to improve your experience.",
          dismiss: "Got it!",
          allow: "Allow cookies",
          deny: "Decline",
          link: "Learn more",
          policy: "Cookie Policy",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="Type something..."></div><a class="searchbox-close" href="javascript:;">Ã—</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"Type something...","untitled":"(Untitled)","posts":"Posts","pages":"Pages","categories":"Categories","tags":"Tags"});
        });</script></body></html>